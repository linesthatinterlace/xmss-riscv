# CLAUDE.md — isa/reports/

## What lives here

- `xmss_rv64_isa_profile.tex` — Hand-written LaTeX report (the deliverable).
  Covers methodology, rv64gc findings, the Zbb comparison (rv64gc vs
  rv64gc_zbb), recommended Jasmin targets, and next steps. Author: Wrenna
  Robson, with Claude co-authorship noted in a footnote.

- `xmss_rv64_isa_profile.pdf` — Compiled from the .tex. Rebuild with:
  ```bash
  cd isa/reports && pdflatex xmss_rv64_isa_profile.tex && pdflatex xmss_rv64_isa_profile.tex
  ```
  (Two passes for cross-references.)

- `.gitignore` — TeX auxiliary files (from github/gitignore TeX.gitignore).

## What is NOT committed (generated on demand)

- `xmss_rv64_isa_profile.md` — Auto-generated by `isa/scripts/analyse.sh`.
  Run the script to produce it; do not commit it (it would go stale).

## How the data was produced

1. `isa/scripts/gen_lookup.sh` generates an authoritative mnemonic→extension
   lookup table from the `third_party/riscv-opcodes` submodule.

2. `isa/scripts/analyse.sh` disassembles `impl/c/build-rv/libxmss.a`
   (compiled with `-march=rv64gc`), classifies every instruction using
   the lookup table, and writes the .md report.

3. The Zbb comparison in the .tex (Section 4.1–4.2, Tables 3–4) was
   produced by `isa/scripts/compare_zbb.sh`, which builds `libxmss.a`
   with both `-march=rv64gc` and `-march=rv64gc_zbb` in fresh temp
   directories (avoiding stale CMake cache issues), runs `analyse.sh`
   on each, and prints a summary comparison. To reproduce:
   ```bash
   isa/scripts/compare_zbb.sh
   ```
   The data is then manually incorporated into the .tex.

## Key decisions

- The .tex is the source of truth for analysis and commentary. The .md
  is a raw data dump useful for spot-checking but not authoritative.
- The .tex includes hand-written interpretation (the Zbb comparison,
  "where Zbb lands" breakdown, Jasmin target recommendations) that goes
  beyond what the script produces.
- If the C implementation changes significantly (new modules, different
  compiler version), re-run the scripts and update the .tex manually.
